#include "EmonLib.h" // https://github.com/openenergymonitor/EmonLib
#define NSENSORS 4
#define STARTPIN 5

EnergyMonitor emon;
int irms;

const int const_voltage = 234;
//const int const_calib = 110;
const int const_calib = 29;// Current: input pin, calibration. Cur Const= Ratio/BurdenR. 1800/62 = 29
const int const_irms = 1480;  

void setup(){
	Serial.begin(9600);		// Programming USB
	SerialUSB.begin(9600); 	// Native USB
	emon.current(STARTPIN, const_calib);
}

void print_serial(){
	irms = int(emon.calcIrms(const_irms)*const_voltage);
	Serial.print(irms);
	SerialUSB.print(irms);
	Serial.println();
	SerialUSB.println();
	delay(700);
}

void loop(){
	print_serial();
}


